runtime: python37
instance_class: F4
service: ${MODULE_NAME}

vpc_access_connector:
  name: "projects/decent-digit-629/locations/europe-west1/connectors/cfl-connector"

handlers:
  - url: /favicon\.ico
    static_files: static/portal/img/favicon.ico
    upload: static/portal/img/favicon\.ico

  - url: /robots\.txt
    static_files: static/robots.txt
    upload: static/robots\.txt

  - url: /apple-touch-icon\.png
    static_files: static/apple-touch-icon.png
    upload: static/apple-touch-icon\.png

  - url: /apple-touch-icon-76x76\.png
    static_files: static/apple-touch-icon-76x76.png
    upload: static/apple-touch-icon-76x76\.png

  - url: /apple-touch-icon-120x120\.png
    static_files: static/apple-touch-icon-120x120.png
    upload: static/apple-touch-icon-120x120\.png

  - url: /apple-touch-icon-152x152\.png
    static_files: static/apple-touch-icon-152x152.png
    upload: static/apple-touch-icon-152x152\.png

  - url: /apple-touch-icon-180x180\.png
    static_files: static/apple-touch-icon-180x180.png
    upload: static/apple-touch-icon-180x180\.png

  - url: /static
    static_dir: static
    secure: always

  - url: /aimmo/api/.*
    script: auto
    secure: always

  - url: /api/.*
    script: auto
    secure: always

  - url: /.*
    script: auto
    secure: always

inbound_services:
  - warmup

env_variables:
  DJANGO_SETTINGS_MODULE: "django_site.settings"
  HTTPS: "on"
  CACHE_PREFIX: "${CACHE_PREFIX}"
  DATABASE_NAME: "${DATABASE_NAME}"
  RECAPTCHA_PRIVATE_KEY: "${RECAPTCHA_PRIVATE_KEY}"
  RECAPTCHA_PUBLIC_KEY: "${RECAPTCHA_PUBLIC_KEY}"
  DJANGO_PORTAL_CONTACT_FORM_EMAIL: "${DJANGO_PORTAL_CONTACT_FORM_EMAIL}"
  DJANGO_CREATOR_AUTH_TOKEN: "${DJANGO_CREATOR_AUTH_TOKEN}"
  DJANGO_SALESFORCE_URL: "${DJANGO_SALESFORCE_URL}"
  DJANGO_SALESFORCE_OID: "${DJANGO_SALESFORCE_OID}"
  DJANGO_SALESFORCE_RT: "${DJANGO_SALESFORCE_RT}"
  DJANGO_MODULE_NAME: "${MODULE_NAME}"
